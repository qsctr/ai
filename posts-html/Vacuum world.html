<h1 id="vacuum-world">Vacuum world</h1>
<p>See the source code on GitHub: <a href="https://github.com/qsctr/vacuum-world">https://github.com/qsctr/vacuum-world</a></p>
<h2 id="9-29-2016-">9/29/2016:</h2>
<p>In Vacuum world there are two connected rooms. Each one can either have dirt in it or not, and there is a vacuum cleaner in one room.</p>
<p><img src="images/vacuum-world.png" alt="Vacuum world"></p>
<p>The job of the vacuum cleaner is to go around and suck all the dirt in the least steps possible. The number of steps is also known as the cost. The possible actions are:</p>
<p><img src="images/vacuum-actions.png" alt="Vacuum actions"></p>
<p>Since the configuration is very simple, there are only 8 possible states. So it is possible to explicitly specify the sequence of actions the vacuum should perform for each of the 8 states. However I decided to make the vacuum decide the next step based on the current state.</p>
<p>I used Haskell for the project again. One cool thing about Haskell is that it is easy to define custom data types. So I defined three data types.</p>
<pre class="language-haskell"><code class="language-haskell"><span class="token keyword">data</span> <span class="token constant">Vacuum</span> <span class="token operator">=</span> <span class="token constant">L</span> <span class="token operator">|</span> <span class="token constant">R</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token keyword">data</span> <span class="token constant">Action</span> <span class="token operator">=</span> <span class="token constant">MoveL</span> <span class="token operator">|</span> <span class="token constant">MoveR</span> <span class="token operator">|</span> <span class="token constant">Suck</span> <span class="token operator">|</span> <span class="token constant">NoOp</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Eq</span><span class="token punctuation">,</span> <span class="token constant">Show</span><span class="token punctuation">)</span>
<span class="token keyword">data</span> <span class="token constant">State</span> <span class="token operator">=</span> <span class="token constant">State</span>
    <span class="token punctuation">{</span> <span class="token hvariable">vacuum</span> <span class="token operator">::</span> <span class="token constant">Vacuum</span>
    <span class="token punctuation">,</span> <span class="token hvariable">dirtL</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
    <span class="token punctuation">,</span> <span class="token hvariable">dirtR</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
    <span class="token punctuation">,</span> <span class="token hvariable">action</span> <span class="token operator">::</span> <span class="token constant">Action</span>
    <span class="token punctuation">,</span> <span class="token hvariable">playing</span> <span class="token operator">::</span> <span class="token constant">Bool</span>
    <span class="token punctuation">,</span> <span class="token hvariable">cost</span> <span class="token operator">::</span> <span class="token constant">Int</span>
    <span class="token punctuation">,</span> <span class="token hvariable">vacuumPicture</span> <span class="token operator">::</span> <span class="token constant">Picture</span>
    <span class="token punctuation">,</span> <span class="token hvariable">dirtPicture</span> <span class="token operator">::</span> <span class="token constant">Picture</span>
    <span class="token punctuation">}</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Show</span><span class="token punctuation">)</span>
</code></pre>
<p>So for example, <code>Vacuum</code> is the name of the type. And <code>L</code> and <code>R</code> are the value constructors for that type (note that this is different than object-oriented constructors). For the last data type, there is only one constructor, called <code>State</code>, but many states are possible, since the constructor takes named arguments such as the vacuum position, whether there is dirt in either room, etc.</p>
<p>Here is the <code>update</code> function. It is called at each step to update the <code>State</code>.</p>
<pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">update</span> <span class="token operator">::</span> <span class="token constant">State</span> <span class="token operator">-></span> <span class="token constant">IO</span> <span class="token constant">State</span>
<span class="token hvariable">update</span> <span class="token hvariable">state</span><span class="token operator">@</span><span class="token constant">State</span> <span class="token punctuation">{</span><span class="token operator">..</span><span class="token punctuation">}</span>
    <span class="token operator">|</span> <span class="token hvariable">playing</span> <span class="token operator">=</span> <span class="token hvariable">printState</span> <span class="token operator">$</span> <span class="token hvariable">act</span> <span class="token punctuation">{</span> <span class="token hvariable">cost</span> <span class="token operator">=</span> <span class="token hvariable">cost</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token hvariable">decide</span> <span class="token operator">==</span> <span class="token constant">NoOp</span> <span class="token keyword">then</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token hvariable">action</span> <span class="token operator">=</span> <span class="token hvariable">decide</span> <span class="token punctuation">}</span>
    <span class="token operator">|</span> <span class="token builtin">otherwise</span> <span class="token operator">=</span> <span class="token builtin">return</span> <span class="token hvariable">state</span>
    <span class="token keyword">where</span>   <span class="token hvariable">sense</span> <span class="token operator">=</span> <span class="token hvariable">vacuum</span> <span class="token operator">==</span> <span class="token constant">L</span> <span class="token operator">&amp;&amp;</span> <span class="token hvariable">dirtL</span> <span class="token operator">||</span> <span class="token hvariable">vacuum</span> <span class="token operator">==</span> <span class="token constant">R</span> <span class="token operator">&amp;&amp;</span> <span class="token hvariable">dirtR</span>
            <span class="token hvariable">decide</span>
                <span class="token operator">|</span> <span class="token hvariable">sense</span> <span class="token operator">=</span> <span class="token constant">Suck</span>
                <span class="token operator">|</span> <span class="token hvariable">vacuum</span> <span class="token operator">==</span> <span class="token constant">L</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token hvariable">dirtR</span> <span class="token keyword">then</span> <span class="token constant">MoveR</span> <span class="token keyword">else</span> <span class="token constant">NoOp</span>
                <span class="token operator">|</span> <span class="token hvariable">vacuum</span> <span class="token operator">==</span> <span class="token constant">R</span> <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token hvariable">dirtL</span> <span class="token keyword">then</span> <span class="token constant">MoveL</span> <span class="token keyword">else</span> <span class="token constant">NoOp</span>
            <span class="token hvariable">act</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">decide</span> <span class="token keyword">of</span>
                <span class="token constant">MoveR</span> <span class="token operator">-></span> <span class="token hvariable">state</span> <span class="token punctuation">{</span> <span class="token hvariable">vacuum</span> <span class="token operator">=</span> <span class="token constant">R</span> <span class="token punctuation">}</span>
                <span class="token constant">MoveL</span> <span class="token operator">-></span> <span class="token hvariable">state</span> <span class="token punctuation">{</span> <span class="token hvariable">vacuum</span> <span class="token operator">=</span> <span class="token constant">L</span> <span class="token punctuation">}</span>
                <span class="token constant">Suck</span> <span class="token operator">-></span> <span class="token keyword">if</span> <span class="token hvariable">vacuum</span> <span class="token operator">==</span> <span class="token constant">L</span> <span class="token keyword">then</span> <span class="token hvariable">state</span> <span class="token punctuation">{</span> <span class="token hvariable">dirtL</span> <span class="token operator">=</span> <span class="token constant">False</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token hvariable">state</span> <span class="token punctuation">{</span> <span class="token hvariable">dirtR</span> <span class="token operator">=</span> <span class="token constant">False</span> <span class="token punctuation">}</span>
                <span class="token constant">NoOp</span> <span class="token operator">-></span> <span class="token hvariable">state</span>
</code></pre>
<p>This function is very straightforward. It creates 3 values depending on the state, <code>sense</code>, <code>decide</code>, and <code>act</code>. <code>sense</code> is a <code>Bool</code> representing whether there is dirt in same room as the vacuum. <code>decide</code> is an <code>Action</code> which depends on the result of <code>sense</code> and the current state. <code>act</code> is a new <code>State</code> which is based off the old state and depends on the result of <code>decide</code>. And finally the function returns the state of <code>act</code> but with the <code>cost</code> increased by 1 and the <code>action</code> changed to the new action from <code>decide</code>. Actually the only purpose of the <code>cost</code> and <code>action</code> fields is to display the information to the user, since the state is printed out every time it is updated. For displaying information I am actually just printing the <code>State</code> data structure directly.</p>
<p>I liked doing this project. Some future improvements I could make are to let the vacuum clean more than two rooms, arranged in different ways, or to make integer amounts of dirt rather than just a boolean amount.</p>
